<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Generate Prompt - PromptCart</title>
  <link rel="icon" href="favicon.ico" type="image/x-icon" />


  <script>
    // Theme
    if (localStorage.getItem("theme") === "light") {
      document.documentElement.classList.add("light-theme");
    }

    // Auth check
    if (localStorage.getItem("isLoggedIn") !== "true") {
      window.location.href = "login.html";
    }
  </script>

  <style>
:root { --primary: #ffffff; --primary-hover: #cccccc; --bg: #000000; --bg-card: #121212; --bg-hover: #272727; --text: #ffffff; --text-muted: #888888; --border: #333333; --success: #10b981; --accent: #6366f1; --accent-hover: #4f46e5; } :root.light-theme { --bg: #f4f4f5; --bg-card: #ffffff; --bg-hover: #f9fafb; --text: #18181b; --text-muted: #71717a; --border: #e4e4e7; --accent: #6366f1; --accent-hover: #4f46e5; } * { margin: 0; padding: 0; box-sizing: border-box; } body { font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif; background: var(--bg); color: var(--text); overflow-x: hidden; } .navbar { background: var(--bg-card); border-bottom: 1px solid var(--border); padding: 16px 24px; display: flex; align-items: center; justify-content: space-between; position: sticky; top: 0; z-index: 100; } .logo { font-size: 20px; font-weight: 700; background: linear-gradient(135deg, #ffffff 0%, #666666 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; } .light-theme .logo { background: linear-gradient(135deg, #000000 0%, #666666 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; } .user-avatar { width: 36px; height: 36px; border-radius: 50%; background: linear-gradient(135deg, #333333 0%, #000000 100%); display: flex; align-items: center; justify-content: center; font-weight: 600; cursor: pointer; transition: transform 0.3s ease; } .user-avatar:hover { transform: scale(1.05); } .container { display: flex; min-height: calc(100vh - 69px); } .sidebar { width: 260px; background: var(--bg-card); border-right: 1px solid var(--border); padding: 24px 0; position: sticky; top: 69px; height: calc(100vh - 69px); overflow-y: auto; } .sidebar-item { padding: 12px 24px; display: flex; align-items: center; gap: 12px; color: var(--text-muted); text-decoration: none; transition: all 0.3s ease; cursor: pointer; font-size: 14px; } .sidebar-item:hover { background: var(--bg-hover); color: var(--text); } .sidebar-item.active { background: rgba(255, 255, 255, 0.1); color: var(--primary); border-left: 3px solid var(--primary); } .sidebar-item span { font-size: 18px; } .main-content { flex: 1; padding: 32px; overflow-y: auto; } .page-title { font-size: 28px; font-weight: 600; margin-bottom: 8px; } .page-subtitle { font-size: 14px; color: var(--text-muted); margin-bottom: 32px; } .generator-card { background: var(--bg-card); border: 1px solid var(--border); border-radius: 16px; padding: 40px; max-width: 900px; margin-bottom: 32px; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); }

/* ‚ú® NEW PROFESSIONAL INPUT STYLES */
.form-group { margin-bottom: 28px; position: relative; }

.form-label { 
  display: block; 
  margin-bottom: 10px; 
  font-weight: 600; 
  color: var(--text); 
  font-size: 14px;
  letter-spacing: 0.01em;
  display: flex;
  align-items: center;
  gap: 8px;
}

.form-label-icon {
  font-size: 16px;
  opacity: 0.8;
}

.form-input, .form-select, .form-textarea { 
  width: 100%; 
  background: var(--bg); 
  border: 2px solid var(--border); 
  border-radius: 10px; 
  padding: 14px 18px; 
  color: var(--text); 
  font-family: inherit; 
  font-size: 15px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
}

.form-input::placeholder,
.form-textarea::placeholder {
  color: var(--text-muted);
  opacity: 0.6;
}

.form-textarea { 
  min-height: 140px; 
  resize: vertical; 
  line-height: 1.6;
}

.form-input:hover,
.form-select:hover,
.form-textarea:hover {
  border-color: var(--text-muted);
  background: rgba(255, 255, 255, 0.02);
}

.form-input:focus, 
.form-select:focus, 
.form-textarea:focus { 
  outline: none; 
  border-color: var(--accent);
  background: rgba(99, 102, 241, 0.05);
  box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.1);
}

.light-theme .form-input:focus,
.light-theme .form-select:focus,
.light-theme .form-textarea:focus {
  background: rgba(99, 102, 241, 0.03);
}

.form-select {
  cursor: pointer;
  appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%23888888' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 14px center;
  padding-right: 44px;
}

.input-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 20px;
  margin-bottom: 28px;
}

@media (max-width: 640px) {
  .input-grid {
    grid-template-columns: 1fr;
  }
}

.input-helper-text {
  font-size: 12px;
  color: var(--text-muted);
  margin-top: 6px;
  display: block;
}

.btn-generate { 
  background: linear-gradient(135deg, var(--accent) 0%, var(--accent-hover) 100%);
  color: #ffffff; 
  border: none; 
  padding: 16px 40px; 
  border-radius: 10px; 
  font-size: 16px; 
  font-weight: 600; 
  cursor: pointer; 
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  display: flex; 
  align-items: center; 
  gap: 10px;
  box-shadow: 0 4px 14px 0 rgba(99, 102, 241, 0.4);
  width: 100%;
  justify-content: center;
  margin-top: 12px;
}

.btn-generate:hover { 
  transform: translateY(-2px);
  box-shadow: 0 6px 20px 0 rgba(99, 102, 241, 0.5);
}

.btn-generate:active {
  transform: translateY(0);
}

.btn-generate:disabled {
  opacity: 0.6;
  cursor: not-allowed;
  transform: none;
}

.result-section { 
  background: var(--bg-card); 
  border: 1px solid var(--border); 
  border-radius: 16px; 
  padding: 32px; 
  max-width: 900px; 
  display: none; 
  animation: fadeIn 0.5s ease;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
}

@keyframes fadeIn { 
  from { opacity: 0; transform: translateY(10px); } 
  to { opacity: 1; transform: translateY(0); } 
}

.result-header { 
  display: flex; 
  justify-content: space-between; 
  align-items: center; 
  margin-bottom: 20px; 
}

.result-title { 
  font-size: 18px; 
  font-weight: 600; 
}

#copyBtn {
  background: var(--bg);
  border: 2px solid var(--border);
  color: var(--text);
  padding: 10px 20px;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  gap: 6px;
}

#copyBtn:hover {
  background: var(--bg-hover);
  border-color: var(--text-muted);
}

.prompt-output { 
  background: var(--bg); 
  padding: 24px; 
  border-radius: 10px; 
  border: 2px solid var(--border); 
  color: var(--text); 
  line-height: 1.7; 
  white-space: pre-wrap;
  font-size: 14px;
}

.mobile-menu-btn { 
  display: none; 
  background: none; 
  border: none; 
  color: var(--text); 
  font-size: 24px; 
  cursor: pointer; 
}

@media (max-width: 768px) { 
  .sidebar { 
    position: fixed; 
    left: -260px; 
    top: 69px; 
    z-index: 99; 
    transition: left 0.3s ease; 
  } 
  .sidebar.open { 
    left: 0; 
  } 
  .mobile-menu-btn { 
    display: block; 
  } 
  .main-content { 
    padding: 20px; 
  }
  .generator-card {
    padding: 24px;
  }
}

/* Loader */
.loader-container {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: var(--bg); z-index: 9999;
    display: flex; justify-content: center; align-items: center;
    transition: opacity 0.5s ease;
}
.loader { width: 112px; height: 112px; position: relative; }
.box1, .box2, .box3 {
    border: 16px solid var(--text);
    box-sizing: border-box; position: absolute; display: block;
}
.box1 { width: 112px; height: 48px; margin-top: 64px; margin-left: 0px; animation: abox1 4s 1s forwards ease-in-out infinite; }
.box2 { width: 48px; height: 48px; margin-top: 0px; margin-left: 0px; animation: abox2 4s 1s forwards ease-in-out infinite; }
.box3 { width: 48px; height: 48px; margin-top: 0px; margin-left: 64px; animation: abox3 4s 1s forwards ease-in-out infinite; }
@keyframes abox1 {
    0% { width: 112px; height: 48px; margin-top: 64px; margin-left: 0px; }
    12.5% { width: 48px; height: 48px; margin-top: 64px; margin-left: 0px; }
    25% { width: 48px; height: 48px; margin-top: 64px; margin-left: 0px; }
    37.5% { width: 48px; height: 48px; margin-top: 64px; margin-left: 0px; }
    50% { width: 48px; height: 48px; margin-top: 64px; margin-left: 0px; }
    62.5% { width: 48px; height: 48px; margin-top: 64px; margin-left: 0px; }
    75% { width: 48px; height: 112px; margin-top: 0px; margin-left: 0px; }
    87.5% { width: 48px; height: 48px; margin-top: 0px; margin-left: 0px; }
    100% { width: 48px; height: 48px; margin-top: 0px; margin-left: 0px; }
}
@keyframes abox2 {
    0% { width: 48px; height: 48px; margin-top: 0px; margin-left: 0px; }
    12.5% { width: 48px; height: 48px; margin-top: 0px; margin-left: 0px; }
    25% { width: 48px; height: 48px; margin-top: 0px; margin-left: 0px; }
    37.5% { width: 48px; height: 48px; margin-top: 0px; margin-left: 0px; }
    50% { width: 112px; height: 48px; margin-top: 0px; margin-left: 0px; }
    62.5% { width: 48px; height: 48px; margin-top: 0px; margin-left: 64px; }
    75% { width: 48px; height: 48px; margin-top: 0px; margin-left: 64px; }
    87.5% { width: 48px; height: 48px; margin-top: 0px; margin-left: 64px; }
    100% { width: 48px; height: 48px; margin-top: 0px; margin-left: 64px; }
}
@keyframes abox3 {
    0% { width: 48px; height: 48px; margin-top: 0px; margin-left: 64px; }
    12.5% { width: 48px; height: 48px; margin-top: 0px; margin-left: 64px; }
    25% { width: 48px; height: 112px; margin-top: 0px; margin-left: 64px; }
    37.5% { width: 48px; height: 48px; margin-top: 64px; margin-left: 64px; }
    50% { width: 48px; height: 48px; margin-top: 64px; margin-left: 64px; }
    62.5% { width: 48px; height: 48px; margin-top: 64px; margin-left: 64px; }
    75% { width: 48px; height: 48px; margin-top: 64px; margin-left: 64px; }
    87.5% { width: 48px; height: 48px; margin-top: 64px; margin-left: 64px; }
    100% { width: 112px; height: 48px; margin-top: 64px; margin-left: 0px; }
}
  </style>
</head>

<body>
<div class="loader-container" id="loader">
    <div class="loader">
        <div class="box1"></div>
        <div class="box2"></div>
        <div class="box3"></div>
    </div>
</div>

<nav class="navbar">
  <div style="display: flex; align-items: center; gap: 16px;">
            <button class="mobile-menu-btn" id="menuToggle">‚ò∞</button>
            <div style="display: flex; align-items: center; gap: 10px;">
                <img src="logo.png" alt="PromptCart Logo" height="20px">
            </div>
        </div>
  <div class="user-avatar" onclick="location.href='settings.html'">U</div>
</nav>

<div class="container">
  <aside class="sidebar" id="sidebar">
    <a href="index.html" class="sidebar-item">üìä Dashboard</a>
    <a href="templates.html" class="sidebar-item">üìù Templates</a>
    <a href="liked.html" class="sidebar-item">‚ù§Ô∏è Liked</a>
    <a href="generate.html" class="sidebar-item active">‚ú® Generate</a>
    <a href="community.html" class="sidebar-item">üë• Community</a>
    <a href="settings.html" class="sidebar-item">‚öôÔ∏è Settings</a>
  </aside>

  <main class="main-content">
    <h1 class="page-title">Generate New Prompt</h1>
    <p class="page-subtitle">Create professional AI prompts tailored to your needs</p>

    <div class="generator-card">
      <div class="input-grid">
        <div class="form-group">
          <label class="form-label">
            <span class="form-label-icon">üë§</span>
            Role
          </label>
          <input id="userRole" class="form-input" placeholder="e.g., Content Writer, Developer" />
        </div>

        <div class="form-group">
          <label class="form-label">
            <span class="form-label-icon">üéØ</span>
            Domain
          </label>
          <input id="userDomain" class="form-input" placeholder="e.g., Marketing, Technology" />
        </div>
      </div>

      <div class="form-group">
        <label class="form-label">
          <span class="form-label-icon">üìù</span>
          Objective
        </label>
        <textarea id="userObjective" class="form-textarea" placeholder="Describe what you want to achieve with this prompt..."></textarea>
        <span class="input-helper-text">Be specific about your goals and desired outcomes</span>
      </div>

      <div class="input-grid">
        <div class="form-group">
          <label class="form-label">
            <span class="form-label-icon">üë•</span>
            Target Audience
          </label>
          <input id="userAudience" class="form-input" placeholder="e.g., Beginners, Professionals" />
        </div>

        <div class="form-group">
          <label class="form-label">
            <span class="form-label-icon">üé®</span>
            Tone
          </label>
          <select id="userTone" class="form-select">
            <option>Professional</option>
            <option>Casual</option>
            <option>Persuasive</option>
            <option>Educational</option>
          </select>
        </div>
      </div>

      <div class="form-group">
        <label class="form-label">
          <span class="form-label-icon">‚öôÔ∏è</span>
          Constraints (Optional)
        </label>
        <input id="userConstraints" class="form-input" placeholder="e.g., Maximum 200 words, Include examples" />
        <span class="input-helper-text">Add any specific requirements or limitations</span>
      </div>

      <button id="generateBtn" class="btn-generate">
        <span>‚ú®</span>
        Generate Prompt
      </button>
    </div>

    <div class="result-section" id="resultSection">
      <div class="result-header">
        <h3 class="result-title">Your Generated Prompt</h3>
        <button id="copyBtn">üìã Copy</button>
      </div>
      <div id="promptOutput" class="prompt-output"></div>
    </div>
  </main>
</div>

<!-- ‚úÖ SCRIPT (UNCHANGED) -->
<script>
const generateBtn = document.getElementById("generateBtn");
const resultSection = document.getElementById("resultSection");
const promptOutput = document.getElementById("promptOutput");
const copyBtn = document.getElementById("copyBtn");

// Inputs
const userRole = document.getElementById("userRole");
const userDomain = document.getElementById("userDomain");
const userObjective = document.getElementById("userObjective");
const userAudience = document.getElementById("userAudience");
const userTone = document.getElementById("userTone");
const userConstraints = document.getElementById("userConstraints");

generateBtn.addEventListener("click", async () => {
  if (!userObjective.value.trim()) {
    alert("Please enter what you want to generate.");
    return;
  }

  generateBtn.disabled = true;
  generateBtn.textContent = "‚è≥ Generating...";

  const payload = {
    role: userRole.value.trim(),
    domain: userDomain.value.trim(),
    objective: userObjective.value.trim(),
    targetAudience: userAudience.value.trim(), // ‚úÖ FIXED
    tone: userTone.value,
    constraints: userConstraints.value.trim()
  };

  try {
    const res = await fetch("/api/generate", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify(payload)
    });

    if (!res.ok) {
      throw new Error("API not responding");
    }

    const data = await res.json();
    promptOutput.textContent = data.prompt;
    resultSection.style.display = "block";

    // Save to Recent Prompts
    const newPrompt = {
      title: userObjective.value.trim(),
      desc: data.prompt,
      category: userDomain.value.trim() || "General",
      date: new Date().toISOString(),
      model: "Gemini"
    };

    const recentPrompts = JSON.parse(localStorage.getItem('recentPrompts') || '[]');
    recentPrompts.unshift(newPrompt);
    if (recentPrompts.length > 50) recentPrompts.pop(); // Limit history
    localStorage.setItem('recentPrompts', JSON.stringify(recentPrompts));

  } catch (err) {
    console.error(err);
    alert("‚ùå Failed to generate prompt. API not responding.");
  } finally {
    generateBtn.disabled = false;
    generateBtn.textContent = "‚ú® Generate Magic";
  }
});

copyBtn.addEventListener("click", () => {
  navigator.clipboard.writeText(promptOutput.textContent);
  copyBtn.textContent = "‚úÖ Copied";
  setTimeout(() => {
    copyBtn.textContent = "üìã Copy";
  }, 1500);
});

window.addEventListener('load', () => {
            setTimeout(() => {
                const loader = document.getElementById('loader');
                if (loader) {
                    loader.style.opacity = '0';
                    setTimeout(() => {
                        loader.style.display = 'none';
                    }, 500);
                }
            }, 2500);
        });

</script>
</body>
</html>